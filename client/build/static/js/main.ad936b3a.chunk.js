(this["webpackJsonpweb-frameworks-course"]=this["webpackJsonpweb-frameworks-course"]||[]).push([[0],{27:function(e,t,a){e.exports=a(49)},32:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),i=a.n(s),l=a(12),o=(a(32),a(13)),c=a(4),u=a(5),h=a(7),m=a(6),d=a(2),p=a(8),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",passwordConfirm:"",isLoading:!1,registerSuccess:!1},a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleValidation",value:function(){var e=!0;return/^[a-zA-Z0-9]+$/.test(this.state.username)||(e=!1,alert("Your username can contain only letters and numbers")),this.state.password.length<6&&(e=!1,alert("Your password must be atleast 6 characters long")),this.state.passwordConfirm!==this.state.password&&(e=!1,alert("Your passwords don't match")),e}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.handleValidation()){this.setState({isLoading:!0}),fetch("http://34.239.125.70/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(e){return e.json()})).then((function(e){console.log("json",e),t.setState({registerSuccess:!0})}))}}},{key:"render",value:function(){var e=this;return this.state.registerSuccess?r.a.createElement(o.a,{to:"/signin"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,r.a.createElement("input",{type:"text",placeholder:"Username",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}})),r.a.createElement("label",null,r.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}})),r.a.createElement("label",null,r.a.createElement("input",{type:"password",placeholder:"Confirm Password",value:this.state.passwordConfirm,onChange:function(t){e.setState({passwordConfirm:t.target.value})}})),r.a.createElement("input",{type:"submit",value:"Submit",onClick:function(t){return e.handleSubmit(t)}})))}}]),t}(n.Component);var b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",isLoading:!1,isAuthenticated:!1},a.handleSignIn=a.handleSignIn.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleValidation",value:function(){var e=!0;return/^[a-zA-Z0-9]+$/.test(this.state.username)||(e=!1,alert("Your username can contain only letters and numbers")),this.state.password.length<6&&(e=!1,alert("Your password must be atleast 6 characters long")),e}},{key:"handleSignIn",value:function(e){var t=this;if(e.preventDefault(),this.handleValidation()){this.setState({isLoading:!0}),fetch("http://34.239.125.70/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(e){return e.json()})).then((function(e){console.log("json",e),e.success?(!function(e,t){e||console.log("Error: Key is missing");try{localStorage.setItem(e,JSON.stringify(t))}catch(a){console.error(a)}}("Token",e.token),t.setState({isLoading:!1,username:"",password:"",token:e.token,isAuthenticated:!0})):t.setState({isLoading:!1})}))}}},{key:"render",value:function(){var e=this;return this.state.isAuthenticated?r.a.createElement(o.a,{to:"/map"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSignIn},r.a.createElement("label",null,r.a.createElement("input",{type:"text",placeholder:"Username",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}})),r.a.createElement("label",null,r.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}})),r.a.createElement("input",{type:"submit",value:"Submit",onClick:function(t){return e.handleSignIn(t)}})))}}]),t}(n.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(l.b,{to:"/register"},r.a.createElement("button",null,"Register")),r.a.createElement(l.b,{to:"/signin"},r.a.createElement("button",null,"Sign In")),r.a.createElement(l.b,{to:"/map"},r.a.createElement("button",null,"Chargers")))}}]),t}(n.Component),v=a(17),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={query:"",value:"name",data:[],filteredData:[]},a.handleSelectChange=a.handleSelectChange.bind(Object(d.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(d.a)(a)),a.listItems=a.listItems.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleSelectChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleInputChange",value:function(e){var t=e.target.value;"name"===this.state.value&&this.setState((function(e){var a=e.data.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return{query:t,filteredData:a}})),"location"===this.state.value&&this.setState((function(e){var a=e.data.filter((function(e){return e.location.toLowerCase().includes(t.toLowerCase())}));return{query:t,filteredData:a}}))}},{key:"listItems",value:function(){return this.state.filteredData.map((function(e,t){return r.a.createElement("li",{key:t},e.name)}))}},{key:"componentDidMount",value:function(){var e=this;fetch("http://34.239.125.70/api/chargers/get").then((function(e){return e.json()})).then((function(t){var a=e.state.query,n=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));e.setState({data:t,filteredData:n})}))}},{key:"render",value:function(){return r.a.createElement("div",{id:"form"},r.a.createElement("form",null,r.a.createElement("select",{value:this.state.value,onChange:this.handleSelectChange},r.a.createElement("option",{value:"name"},"Charger name"),r.a.createElement("option",{value:"location"},"Charger location"))," ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Search for...",value:this.state.query,onChange:this.handleInputChange})),r.a.createElement("ul",null,this.listItems()))}}]),t}(n.Component),y=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"mapInfo"},r.a.createElement("p",null,"This map contains currently available chargers. Some of the slow chargers are free and some have a cost of 0.20\u20ac/min. The fast chargers are paid by electricity consumption and have a cost of 18c/kWh. You can see if a charger is free by clicking the marker."))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={data:[],showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},a.markers=a.markers.bind(Object(d.a)(a)),a.onMapClick=a.onMapClick.bind(Object(d.a)(a)),a.onMarkerClick=a.onMarkerClick.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://34.239.125.70/api/chargers/get").then((function(e){return e.json()})).then((function(t){e.setState({data:t})}))}},{key:"onMapClick",value:function(e){this.state.showingInfoWindow&&this.setState({showingInfoWindow:!1,activeMarker:null})}},{key:"onMarkerClick",value:function(e,t,a){this.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})}},{key:"markers",value:function(){var e=this;return this.state.data.map((function(t,a){return r.a.createElement(v.Marker,{key:a,id:a,name:t.name,location:t.location,type:t.type,inUse:t.inUse?"Taken":"Available",free:t.free?"Yes":"No",position:{lat:t.latitude.$numberDecimal,lng:t.longitude.$numberDecimal},onClick:e.onMarkerClick})}))}},{key:"render",value:function(){return r.a.createElement("div",{id:"container"},r.a.createElement(v.Map,{google:this.props.google,zoom:6,style:{width:"60%",height:"100%"},initialCenter:{lat:64,lng:26.5},onClick:this.onMapClick},this.markers(),r.a.createElement(v.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,"Location: ",this.state.selectedPlace.location),r.a.createElement("p",null,"Type: ",this.state.selectedPlace.type),r.a.createElement("p",null,"Status: ",this.state.selectedPlace.inUse),r.a.createElement("p",null,"Free: ",this.state.selectedPlace.free))),r.a.createElement("div",{id:"listAndInfo"},r.a.createElement(y,null),r.a.createElement(k,null)))}}]),t}(n.Component),w=Object(v.GoogleApiWrapper)({apiKey:"AIzaSyAYm68qosGc-lfgb66VdCJa8QFhVehwIMY"})(E);var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.b,{exact:!0,path:"/",component:g}),r.a.createElement(o.b,{path:"/register",component:f}),r.a.createElement(o.b,{path:"/signin",component:b}),r.a.createElement(o.b,{path:"/map",component:w}))};i.a.render(r.a.createElement(l.a,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.ad936b3a.chunk.js.map